---
include:
  - docassemble.AssemblyLine:al_package.yml
  - docassemble.ILAO:ilao-interview-framework.yml
---
code: |
    ilao_easy_form_url = "https://www.illinoislegalaid.org/"
    ilao_easy_form_title = "Illinois Fee Waiver"
---
metadata:
  title: |
    Application for Fee Waiver
  short title: |
    Fee Waiver
  tags:
    - BE-00-00-00-00
    - BE-04-00-00-00
    - ED-00-00-00-00
    - ES-00-00-00-00
    - FA-00-00-00-00
    - FA-07-00-00-00
    - HE-00-00-00-00
    - HO-00-00-00-00
    - IM-00-00-00-00
    - MO-00-00-00-00
    - RI-10-00-00-00
---
mandatory: True
comment: |
  This contains metadata that will not be overwritten if this YAML file is included in another
  file. Each file gets its own key in the interview_metadata dictionary.
  Most keys are not currently used at runtime, other than "allowed courts".
code: |
  interview_metadata
  if not defined("interview_metadata['IL_fee_waiver']"):
    interview_metadata.initializeObject("IL_fee_waiver")
    interview_metadata["IL_fee_waiver"].update({
      "al_weaver_version": "1.0.2",
      "generated on": "2021-06-22",
      "title": "Application for Fee Waiver",
      "short title": "Fee Waiver",
      "description": """* You will need to know your income and expenses information for the past 12 months. You also need to know the value of your belongings, including any real estate.\n* If you are filling this form out on behalf of a minor or incompetent adult, you will need that person’s information.\n* If you  get  public  benefits,  you  may  want  to  bring  current  proof   of   eligibility   and   a benefits   statement   from   the   agency providing the benefit when you file your forms.\n* If  you  don’t  get  public  benefits,  you  may  want  to  bring  documents  showing  your  income,  value  of  belongings  (including  real  estate)  and  expense  information  when  you  file your forms.""",
      "original_form": "https://www.illinoiscourts.gov/forms/approved-forms/forms-approved-forms-circuit-court/fee-waiver-civil",
      "allowed courts": [
      ],
      "categories": [
        "FA-00-00-00-00",
        "HO-00-00-00-00",
        "MO-00-00-00-00",
        "RI-10-00-00-00",
        "ES-00-00-00-00",
        "IM-00-00-00-00",
        "HE-00-00-00-00",
        "FA-07-00-00-00",
        "BE-00-00-00-00",
        "ED-00-00-00-00",
        "BE-04-00-00-00",
      ],        
      "logic block variable": "interview_order_IL_fee_waiver",
      "attachment block variable": "IL_fee_waiver_attachment",
      "typical role": "unknown",
    })
---
code: |
  allowed_courts = ['Circuit']
---
id: trial court county
continue button field: case_county
question: |
  In which county was this case filed?
fields:
  - no label: trial_court_index
    code: |
      #court_list.filter_courts(allowed_courts, column='department')
      court_list._load_courts()['address_county'].items()
---
depends on:
  - trial_court_index
code: |
  trial_court = court_list.as_court('trial_court', trial_court_index)
  # work around: use assignment instead of this variable
  #trial_court.geolocate()
  # use this in the attachment block: trial_court.address.county
---
code: |
  interview_short_title = "File an Application for a Fee Waiver"
---
code: |
  al_form_type = 'existing_case'
---
objects:
  - signer: ALPeopleList.using(ask_number=True,target_number=1)
  - users: ALPeopleList.using(ask_number=True,target_number=1)
  - court_list: ALCourtLoader.using(file_name='docassemble.ILAO:data/sources/il_courts.xlsx')
  - court_emails: DAEmpty #dummy variable definition  
---
sections:
  - review_IL_fee_waiver: Review your answers
---
#################### Interview order #####################
comment: |
  Controls order and branching logic for questions specific to this form
id: interview_order_IL_fee_waiver
code: |
  # Set the allowed courts for this interview
  allowed_courts = interview_metadata["IL_fee_waiver"]["allowed courts"]
  nav.set_section('review_IL_fee_waiver')
  # Below sets the user_role by asking a question.
  # You can set user_role directly instead to either 'plaintiff' or 'defendant'
  filing_basis
  if filing_basis != "filing_self":
    signers = users
  if user_receives_benefits:
    user_qualifies_interstitial
  else:
    user_has_dependents
    set_progress(11.11)
    user_income_none
    user_annual_none
    user_expense_none
    set_progress(22.22)
    ask_user_assets
    substantial_hardship_explanation
  user_ask_role    
  user_consents_email_notice
  trial_court.address.address
  set_progress(33.33)
  plaintiffs.gather()
  defendants.gather()
  docket_number
  set_progress(44.44)
  users.gather()
  set_parts(subtitle=str(users))
  users[0].birth_year
  users[0].address.address
  set_progress(55.56)
  users[0].address.address
  users[0].email
  if filing_basis != "filing_self":
    signer[0].address.address
    set_progress(66.67)
    signer[0].phone_number
    signer[0].address.address
  interview_order_IL_fee_waiver = True
---
###################### Main order ######################
comment: |
  This block includes the logic for standalone interviews.
  Delete mandatory: True to include in another interview
mandatory: True
code: |
  al_intro_screen
  IL_fee_waiver_intro
  interview_order_IL_fee_waiver
  signature_date
  # Save anonymized interview statistics (customize the saved data below)
  store_variables_snapshot(data={'zip': users[0].address.zip})
  IL_fee_waiver_preview_question
  basic_questions_signature_flow
  users[0].signature
  IL_fee_waiver_download
---
comment: |
  This question is used to introduce your interview. Please customize
id: Application_for_Fee_Waiver
continue button field: IL_fee_waiver_intro
question: |
  Application for Fee Waiver
subquestion: |
  * You will need to know your income and expenses information for the past 12 months. You also need to know the value of your belongings, including any real estate.
  * If you are filling this form out on behalf of a minor or incompetent adult, you will need that person’s information.
  * If you  get  public  benefits,  you  may  want  to  bring  current  proof   of   eligibility   and   a benefits   statement   from   the   agency providing the benefit when you file your forms.
  * If  you  don’t  get  public  benefits,  you  may  want  to  bring  documents  showing  your  income,  value  of  belongings  (including  real  estate)  and  expense  information  when  you  file your forms.
---
id: Do you receive any benefits
question: |
  Do you currently receive any public benefits?
subquestion: |
  Check any benefits that you currently receive.
fields:
  - no label: user_benefits
    datatype: checkboxes
    choices:
      - Supplemental Security Income (SSI) (Not Social Security): SSI
      - Aid to the Aged, Blind and Disabled (AABD): AABD
      - Temporary Assistance to Needy Families (TANF): TANF
      - SNAP (Food Stamps): SNAP
      - General Assistance (GA): GA
      - Transitional Assistance: TA
      - State Children and Family Assistance: SCFA
    required: False
---
code: |
  user_receives_benefits = user_benefits.any_true()
---
continue button field: user_qualifies_interstitial
question: |
  You qualify for a fee waiver
subquestion: |
  Because you currently receive public benefits, you qualify for a 
  100% waiver of fees for your civil case.
---
id: How many dependents do you have
question: |
  Does anyone live with you that you support financially?  
fields:
  - I support someone who lives with me: user_has_dependents
    datatype: yesnoradio
  - Number of adults who live with me and who I support: user_dependents_adults
    datatype: integer
    min: 0
    show if: user_has_dependents
  - Number of children under 18 who live with me and who I support: user_dependents_children
    datatype: integer
    min: 0
    show if: user_has_dependents
---
id: What income did you receive in the last month
question: |
  What income did you receive in the last month?
fields:
  - "I do not have any income": user_income_none
    datatype: yesno
    disable others: True
  - Money from a job or self-employment: user_income_employment
    datatype: yesno
  - "Amount": user_income_employment_amount
    datatype: currency
    min: 0
    show if: user_income_employment
  - "Unemployment benefits": user_income_unemployment
    datatype: yesno    
  - "Amount": user_income_unemployment_amount
    datatype: currency
    min: 0
    show if: user_income_unemployment
  - "Income from household members": user_income_household
    datatype: yesno
  - "Amount": user_income_household_amount
    datatype: currency
    min: 0
    show if: user_income_household    
  - "Social Security (not SSI)": user_income_ss
    datatype: yesno
  - "Amount": user_income_ss_amount
    datatype: currency
    maxlength: 10
    show if: user_income_ss
  - "Child support income": user_income_child_support
    datatype: yesno
  - "Amount": user_income_child_support_amount
    datatype: currency
    min: 0
    show if: user_income_child_support
  - "Pension": user_income_pension
    datatype: yesno
  - "Amount": user_income_pension_amount
    datatype: currency
    min: 0
    show if: user_income_pension
  - "Other income": user_income_other
    datatype: yesno
  - "Kind of other income": user_income_other_kind
    maxlength: 30
    show if: user_income_other
  - "Amount": user_income_amount
    datatype: currency
    min: 0
    show if: user_income_other
---
code: |
  def sum_if_defined(*pargs):
    total = 0
    for source in pargs:
      if defined(source):
        total += value(source)
    return total        
  
  user_income_total = sum_if_defined('user_income_amount', 
      'user_income_household_amount',
      'user_income_ss_amount',
      'user_income_employment_amount',
      'user_income_child_support_amount',
      'user_income_unemployment_amount',
      'user_income_pension_amount')     
---
id: What income did you receive in the last year
question: |
  What income did you get in the last 12 months?
subquestion: |
  We will use the information that you gave us about your income
  last month as a starting point. Look it over carefully and make
  any corrections that you need.
  
  Write the actual amount you got over the last 12 months for each kind
  of income.
fields:
  - "No annual income": user_annual_none
    datatype: yesno
    disable others: True
  - Money from a job or self-employment: user_annual_employment
    datatype: yesno
    default: ${ showifdef('user_income_employment') }
  - "Amount": user_annual_employment_amount
    datatype: currency
    min: 0
    default: |
      % if defined('user_income_employment_amount'):
      ${ user_income_employment_amount * 12 }
      % endif
    show if: user_annual_employment
  - "Unemployment benefits": user_annual_unemployment
    datatype: yesno
    default: ${ showifdef('user_income_unemployment') }
  - "Amount": user_annual_unemployment_amount
    datatype: currency
    min: 0
    default: |
      % if defined('user_income_unemployment_amount'):
      ${ user_income_unemployment_amount * 12 }
      % endif
    show if: user_annual_unemployment
  - "Household members": user_annual_household
    datatype: yesno
    default: ${ showifdef('user_income_household') }
  - "Amount": user_annual_household_amount
    datatype: currency
    min: 0
    show if: user_annual_household
    default: |
      % if defined('user_income_household'):
      ${ user_income_household * 12 }
      % endif    
  - "Social Security": user_annual_ss
    datatype: yesno
    default: ${ showifdef('user_income_ss') }
  - "Amount": user_annual_ss_amount
    datatype: currency
    min: 0
    default: |
      % if defined('user_income_ss_amount'):
      ${ user_income_ss_amount * 12 }
      % endif
    show if: user_annual_ss      
  - "Child support": user_annual_child_support
    datatype: yesno
    default: ${ showifdef('user_income_child_support') }
  - "Amount": user_annual_child_support_amount
    datatype: currency
    min: 0
    show if: user_annual_child_support
    default: |
      % if defined('user_income_child_support_amount'):
      ${ user_income_child_support_amount * 12 }
      % endif
  - "Pension": user_annual_pension
    datatype: yesno
    default: ${ showifdef('user_income_pension') }
  - "Amount": user_annual_pension_amount
    datatype: currency
    min: 0
    default: |
      % if defined('user_income_pension_amount'):
      ${ user_income_pension_amount * 12 }
      % endif
    show if: user_annual_pension
  - "Other": user_annual_other
    datatype: yesno
    default: ${ showifdef('user_income_other') }
  - "Other type": user_annual_other_kind
    maxlength: 30
    show if: user_annual_other
    default: |
      ${ showifdef('user_income_other_kind') }    
  - "Amount": user_annual_other_amount
    datatype: currency
    min: 0
    show if: user_annual_other
    default: |
      % if defined('user_income_amount'):
      ${ user_income_amount * 12 }
      % endif
---
code: |
  user_annual_total = sum_if_defined(
      'user_annual_child_support_amount',
      'user_annual_employment_amount',
      'user_annual_household_amount',
      'user_annual_other_amount',
      'user_annual_pension_amount',
      'user_annual_ss_amount',
      'user_annual_unemployment_amount',
  )
---
id: What expenses do you have right now
question: |
  What expenses do you have right now?
subquestion: |
  Write the amount that each expense costs you each month.
fields:
  - "I have no expenses": user_expense_none
    datatype: yesno
    disable others: True
  - "Rent": user_expense_rent
    datatype: yesno    
  - "Amount": user_expense_rent_amount
    datatype: currency
    min: 0
    show if: user_expense_rent
  - "Mortgage for home": user_expense_mortgage
    datatype: yesno
  - "Amount": user_expense_mortgage_amount
    datatype: currency
    min: 0
    show if: user_expense_mortgage
  - "Other mortgage": user_expense_mortgage_other
    datatype: yesno
  - "Amount": user_expense_mortgage_other_amount
    datatype: currency
    min: 0
    show if: user_expense_mortgage_other
  - "Utilities": user_expense_utilities
    datatype: yesno
  - "Amount": user_expense_utilities_amount
    datatype: currency
    min: 0
    show if: user_expense_utilities
  - "Food": user_expense_food
    datatype: yesno
  - "Amount": user_expense_food_amount
    datatype: currency
    min: 0
    show if: user_expense_food
  - "Medical expenses": user_expense_medical
    datatype: yesno
  - "Amount": user_expense_medical_amount
    datatype: currency
    min: 0
    show if: user_expense_medical
  - "Car loan": user_expense_car
    datatype: yesno
  - "Amount": user_expense_car_amount
    datatype: currency
    min: 0
    show if: user_expense_car
  - "Childcare": user_expense_childcare
    datatype: yesno
  - "Amount": user_expense_childcare_amount
    datatype: currency
    min: 0
    show if: user_expense_childcare
  - "Child support": user_expense_child_support
    datatype: yesno
  - "Amount": user_expense_child_support_amount
    datatype: currency
    min: 0
    show if: user_expense_child_support
  - "Other expense": user_expense_other
    datatype: yesno
  - "Kind": user_expense_other_line1
    maxlength: 24
    show if: user_expense_other
  #- "Kind (continued)": user_expense_other_line2
  #  maxlength: 53    
  - "Amount": user_expense_other_amount
    datatype: currency
    min: 0
    show if: user_expense_other
  - "Other debt payments": user_expense_debt_other
    datatype: yesno
  - "Kind": user_expense_debt_other_line1
    maxlength: 28
    show if: user_expense_debt_other
  #- "Kind (continued)": user_expense_debt_other_line2
  #  maxlength: 53
  - "Amount": user_expense_debt_other_amount
    datatype: currency
    min: 0
    show if: user_expense_debt_other
---
code: |
  user_expense_total = sum_if_defined(
      'user_expense_car_amount',
      'user_expense_child_support_amount',
      'user_expense_childcare_amount',
      'user_expense_debt_other_amount',
      'user_expense_food_amount',
      'user_expense_medical_amount',
      'user_expense_mortgage_amount',
      'user_expense_mortgage_other_amount',
      'user_expense_other_amount',
      'user_expense_rent_amount',
      'user_expense_utilities_amount',
    )
---
continue button field: ask_user_assets  
id: What assets do you have
question: |
  What assets do you have?
fields:
  - "No assets": user_asset_none
    datatype: yesno
    disable others: True
  - "Bank account or cash": user_asset_bank_account
    datatype: yesno
  - "Amount": user_asset_bank_account_amount
    datatype: currency
    min: 0
    show if: user_asset_bank_account
  - "House I live in": user_asset_home
    datatype: yesno
  - "Value": user_asset_home_amount
    datatype: currency
    min: 0
    show if: user_asset_home
  - "Amount owed on mortgage": user_asset_home_amount_owed
    datatype: currency
    min: 0
    show if: user_asset_home
  - "Other real estate": user_asset_other_real_estate
    datatype: yesno
  - "Value": user_asset_other_real_estate_amount
    datatype: currency
    min: 0
    show if: user_asset_other_real_estate
  - "Amount owed on mortgage": user_asset_other_real_estate_amount_owed
    datatype: currency
    min: 0
    show if: user_asset_other_real_estate
  - "First vehicle": user_asset_vehicle1
    datatype: yesno
  - "Vehicle is paid in full": user_asset_vehicle1_paid
    datatype: yesno
    show if: user_asset_vehicle1
  - "Value": user_asset_vehicle1_amount
    datatype: currency
    min: 0
    show if: user_asset_vehicle1
  - "Second vehicle": user_asset_vehicle2
    datatype: yesno
  - "Vehicle is paid in full": user_asset_vehicle2_paid
    datatype: yesno
    show if: user_asset_vehicle2    
  - "Value": user_asset_vehicle2_amount
    datatype: currency
    min: 0
    show if: user_asset_vehicle2
  - "Other asset": user_asset_other
    datatype: yesno
  - "Kind": user_asset_other_kind
    maxlength: 29
    show if: user_asset_other    
  - "Amount": user_asset_other_amount
    datatype: currency
    min: 0
    show if: user_asset_other 
#validation code: |
#  if not user_asset_none and not (
#    user_asset_bank_account or 
#    user_asset_home or
#    user_asset_other_real_estate or
#    user_asset_vehicle1 or
#    user_asset_vehicle2 or
#    user_asset_other):
#    validation_error("You need to select one", field="user_asset_none")
---
id: Who is filing this fee waiver
question: |
  Who is completing this fee waiver?
fields:
  - I am filing: filing_basis
    datatype: radio
    choices:
      - For myself: filing_self
      - On behalf of a minor (someone under 18) or an incompetent adult: filing_on_behalf_of      
  - note: |
      **Okay**. List **your** name below. Fill in the rest of the information on
      this website as if you are the person who you are helping. 
    show if: 
      variable: filing_basis
      is: filing_on_behalf_of      
  - How are you related to the filer?: relationship_to_minor
    maxlength: 33
    show if: 
      variable: filing_basis
      is: filing_on_behalf_of
---
id: Do you agree to get notices from the court by email
question: |
  Do you agree to get notices from the court by email?
yesno: user_consents_email_notice
---
id: birth year
question: |
  What year were you born?
fields:
  - Year of birth: users[0].birth_year
    input type: combobox
    datatype: integer
    maxlength: 4
    code: |
      reversed(range(today().year-120, today().year))
---
id: substantial hardship
question: |
  Will you face substantial hardship if you do not get a fee waiver?
subquestion: |
  If you want to explain to a judge why you would be harmed if you do not
  get a fee waiver, you can explain it here.
  
  Complete the sentence below:
fields:
  - label: |
      (Optional) My family or I would face substantial hardship if I have to pay the
      fees, costs, and charges because:
    field: substantial_hardship_explanation
    datatype: area
    rows: 4
    maxlength: 640
    required: False
---
id: preview IL_fee_waiver
question: |
  Preview your form before you sign it
subquestion: |
  Here is a preview of the form you will sign on the next page.   
  
  ${ al_court_bundle.as_pdf(key='preview') }

  Click the image to open it in a new tab. Click the "Make changes" button
  to edit your answers.

  ${ action_button_html(url_action('review_IL_fee_waiver'), label='Make changes', color='info') }
  
  Remember to come back to this window to continue and sign your form.
continue button field: IL_fee_waiver_preview_question    
---
code: |
  signature_fields = ['users[0].signature']
---
id: IL fee waiver review screen
event: review_IL_fee_waiver
question: |
  Review your answers
review:
  - Edit: user_dependents_adults
    button: |
      **Number of adult dependents**:
      ${ user_dependents_adults }
  - Edit: user_dependents_children
    button: |
      **Number of minor dependents**:
      ${ user_dependents_children }
  - Edit: user_receives_benefits
    button: |
      **I receive one of these benefits**:
      ${ word(yesno(user_receives_benefits)) }
  #- Edit: user_pending_benefits
  #  button: |
  #    **I have applied for benefits and my application is pending**:
  #    ${ word(yesno(user_pending_benefits)) }
  - Edit: user_income_ss
    button: |
      **Social Security**:
      ${ word(yesno(user_income_ss)) }
  - Edit: user_income_employment
    button: |
      **Employment**:
      ${ word(yesno(user_income_employment)) }
  - Edit: user_income_employment_amount
    button: |
      **Amount**:
      ${ currency(user_income_employment_amount) }
  - Edit: user_income_ss_amount
    button: |
      **Amount**:
      ${ user_income_ss_amount }
  - Edit: user_income_child_support
    button: |
      **Child support income**:
      ${ word(yesno(user_income_child_support)) }
  - Edit: user_income_unemployment
    button: |
      **Unemployment benefits**:
      ${ word(yesno(user_income_unemployment)) }
  - Edit: user_income_child_support_amount
    button: |
      **Amount**:
      ${ currency(user_income_child_support_amount) }
  - Edit: user_income_unemployment_amount
    button: |
      **Amount**:
      ${ currency(user_income_unemployment_amount) }
  - Edit: user_income_pension
    button: |
      **Pension**:
      ${ word(yesno(user_income_pension)) }
  - Edit: user_income_pension_amount
    button: |
      **Amount**:
      ${ currency(user_income_pension_amount) }
  - Edit: user_income_household
    button: |
      **Income from household members**:
      ${ word(yesno(user_income_household)) }
  - Edit: user_income_household_amount
    button: |
      **Amount**:
      ${ currency(user_income_household_amount) }
  - Edit: user_income_other
    button: |
      **Other income**:
      ${ word(yesno(user_income_other)) }
  - Edit: user_income_amount
    button: |
      **Amount**:
      ${ currency(user_income_amount) }
  - Edit: user_income_other_kind
    button: |
      **Kind of other income**:
      ${ user_income_other_kind }
  - Edit: user_income_none
    button: |
      **I do not have any income**:
      ${ word(yesno(user_income_none)) }
  - Edit: user_income_total
    button: |
      **Total monthly income**:
      ${ currency(user_income_total) }
  - Edit: user_annual_ss_amount
    button: |
      **Amount**:
      ${ currency(user_annual_ss_amount) }
  - Edit: user_annual_employment
    button: |
      **Annual income from work**:
      ${ word(yesno(user_annual_employment)) }
  - Edit: user_annual_employment_amount
    button: |
      **Amount**:
      ${ currency(user_annual_employment_amount) }
  - Edit: user_annual_ss
    button: |
      **Annual Social Security**:
      ${ word(yesno(user_annual_ss)) }
  - Edit: user_annual_unemployment
    button: |
      **Annual unemployment**:
      ${ word(yesno(user_annual_unemployment)) }
  - Edit: user_annual_child_support
    button: |
      **Annual child support**:
      ${ word(yesno(user_annual_child_support)) }
  - Edit: user_annual_child_support_amount
    button: |
      **Amount**:
      ${ currency(user_annual_child_support_amount) }
  - Edit: user_annual_unemployment_amount
    button: |
      **Amount**:
      ${ currency(user_annual_unemployment_amount) }
  - Edit: user_annual_pension
    button: |
      **Pension**:
      ${ word(yesno(user_annual_pension)) }
  - Edit: user_annual_pension_amount
    button: |
      **Amount**:
      ${ currency(user_annual_pension_amount) }
  - Edit: user_annual_household
    button: |
      **Annual household**:
      ${ word(yesno(user_annual_household)) }
  - Edit: user_annual_household_amount
    button: |
      **Amount**:
      ${ currency(user_annual_household_amount) }
  - Edit: user_annual_other
    button: |
      **Annual Other**:
      ${ word(yesno(user_annual_other)) }
  - Edit: user_annual_other_amount
    button: |
      **Amount**:
      ${ currency(user_annual_other_amount) }
  - Edit: user_annual_other_kind
    button: |
      **Other type**:
      ${ user_annual_other_kind }
  - Edit: user_annual_none
    button: |
      **No annual income**:
      ${ word(yesno(user_annual_none)) }
  - Edit: user_annual_total
    button: |
      **Total annual income**:
      ${ currency(user_annual_total) }
  - Edit: user_expense_rent
    button: |
      **Rent**:
      ${ word(yesno(user_expense_rent)) }
  - Edit: user_expense_rent_amount
    button: |
      **Amount**:
      ${ currency(user_expense_rent_amount) }
  - Edit: user_expense_mortgage
    button: |
      **Mortgage for home**:
      ${ word(yesno(user_expense_mortgage)) }
  - Edit: user_expense_mortgage_amount
    button: |
      **Amount**:
      ${ currency(user_expense_mortgage_amount) }
  - Edit: user_expense_mortgage_other
    button: |
      **Other mortgage**:
      ${ word(yesno(user_expense_mortgage_other)) }
  - Edit: user_expense_mortgage_other_amount
    button: |
      **Amount**:
      ${ currency(user_expense_mortgage_other_amount) }
  - Edit: user_expense_utilities
    button: |
      **Utilities**:
      ${ word(yesno(user_expense_utilities)) }
  - Edit: user_expense_utilities_amount
    button: |
      **Amount**:
      ${ currency(user_expense_utilities_amount) }
  - Edit: user_expense_food
    button: |
      **Food**:
      ${ word(yesno(user_expense_food)) }
  - Edit: user_expense_food_amount
    button: |
      **Amount**:
      ${ currency(user_expense_food_amount) }
  - Edit: user_expense_medical
    button: |
      **Medical expenses**:
      ${ word(yesno(user_expense_medical)) }
  - Edit: user_expense_medical_amount
    button: |
      **Amount**:
      ${ currency(user_expense_medical_amount) }
  - Edit: user_expense_car
    button: |
      **Car loan**:
      ${ word(yesno(user_expense_car)) }
  - Edit: user_expense_car_amount
    button: |
      **Amount**:
      ${ currency(user_expense_car_amount) }
  - Edit: user_expense_childcare
    button: |
      **Childcare**:
      ${ word(yesno(user_expense_childcare)) }
  - Edit: user_expense_childcare_amount
    button: |
      **Amount**:
      ${ currency(user_expense_childcare_amount) }
  - Edit: user_expense_child_support
    button: |
      **Child support**:
      ${ word(yesno(user_expense_child_support)) }
  - Edit: user_expense_child_support_amount
    button: |
      **Amount**:
      ${ currency(user_expense_child_support_amount) }
  - Edit: user_expense_other
    button: |
      **Other expense**:
      ${ word(yesno(user_expense_other)) }
  - Edit: user_expense_other_line1
    button: |
      **Kind**:
      ${ user_expense_other_line1 }
  - Edit: user_expense_other_amount
    button: |
      **Amount**:
      ${ currency(user_expense_other_amount) }
  - Edit: user_expense_other_line2
    button: |
      **Kind (continued)**:
      ${ user_expense_other_line2 }
  - Edit: user_expense_debt_other
    button: |
      **Debt**:
      ${ word(yesno(user_expense_debt_other)) }
  - Edit: user_expense_debt_other_line1
    button: |
      **Kind**:
      ${ user_expense_debt_other_line1 }
  - Edit: user_expense_debt_other_line2
    button: |
      **Kind (continued)**:
      ${ user_expense_debt_other_line2 }
  - Edit: user_expense_debt_other_amount
    button: |
      **Amount**:
      ${ currency(user_expense_debt_other_amount) }
  - Edit: user_expense_none
    button: |
      **I have no expenses**:
      ${ word(yesno(user_expense_none)) }
  - Edit: user_expense_total
    button: |
      **Total**:
      ${ currency(user_expense_total) }
  - Edit: user_asset_bank_account
    button: |
      **Bank account or cash**:
      ${ word(yesno(user_asset_bank_account)) }
  - Edit: user_asset_bank_account_amount
    button: |
      **Amount**:
      ${ currency(user_asset_bank_account_amount) }
  - Edit: user_asset_home
    button: |
      **House I live in**:
      ${ word(yesno(user_asset_home)) }
  - Edit: user_asset_home_amount
    button: |
      **Value**:
      ${ currency(user_asset_home_amount) }
  - Edit: user_asset_home_amount_owed
    button: |
      **Amount owed on mortgage**:
      ${ currency(user_asset_home_amount_owed) }
  - Edit: user_asset_other_real_estate
    button: |
      **Other real estate**:
      ${ word(yesno(user_asset_other_real_estate)) }
  - Edit: user_asset_other_real_estate_amount
    button: |
      **Amount**:
      ${ currency(user_asset_other_real_estate_amount) }
  - Edit: user_asset_other_real_estate_amount_owed
    button: |
      **Amount owed on mortgage**:
      ${ currency(user_asset_other_real_estate_amount_owed) }
  - Edit: user_asset_vehicle1
    button: |
      **First vehicle**:
      ${ word(yesno(user_asset_vehicle1)) }
  - Edit: user_asset_vehicle1_paid
    button: |
      **Vehicle is paid in full**:
      ${ word(yesno(user_asset_vehicle1_paid)) }
  - Edit: user_asset_vehicle1_amount
    button: |
      **Value**:
      ${ currency(user_asset_vehicle1_amount) }
  - Edit: user_asset_vehicle2_paid
    button: |
      **Vehicle is paid in full**:
      ${ word(yesno(user_asset_vehicle2_paid)) }
  - Edit: user_asset_vehicle2
    button: |
      **Second vehicle**:
      ${ word(yesno(user_asset_vehicle2)) }
  - Edit: user_asset_vehicle2_amount
    button: |
      **Value**:
      ${ currency(user_asset_vehicle2_amount) }
  - Edit: user_asset_other_amount
    button: |
      **Amount**:
      ${ currency(user_asset_other_amount) }
  - Edit: user_asset_other
    button: |
      **Other asset**:
      ${ word(yesno(user_asset_other)) }
  - Edit: user_asset_other_kind
    button: |
      **Kind**:
      ${ user_asset_other_kind }
  - Edit: user_asset_none
    button: |
      **No assets**:
      ${ word(yesno(user_asset_none)) }
  - Edit: relationship_to_minor
    button: |
      **Relationship of signer to minor or incompetent adult**:
      ${ relationship_to_minor }
  - Edit: user_consents_email_notice
    button: |
      **I agree to receive email**:
      ${ word(yesno(user_consents_email_notice)) }
  - Edit: trial_court
    button: |
      **trial_court**

      % if defined("trial_court.address.county"):
      * address: ${ trial_court.address.block() }
      % endif
  - Edit: plaintiffs.revisit
    button: |
      **plaintiffs**

      % for item in plaintiffs:
        * ${ item }
      % endfor
  - Edit: defendants.revisit
    button: |
      **defendants**

      % for item in defendants:
        * ${ item }
      % endfor
  - Edit: docket_number
    button: |
      **docket_number**:
      ${ docket_number }
  - Edit: users.revisit
    button: |
      **users**

      % for item in users:
        * ${ item }
      % endfor
  - Edit: signer.revisit
    button: |
      **signer**

      % for item in signer:
        * ${ item }
      % endfor
  - Edit: substantial_hardship_explanation
    button: |
      **I will face substantial hardship because**:
      > ${ substantial_hardship_explanation }
---
continue button field: plaintiffs.revisit
question: |
  Edit plaintiffs
subquestion: |
  ${ plaintiffs.table }

  ${ plaintiffs.add_action() }
---
table: plaintiffs.table
rows: plaintiffs
columns:
  - name: |
      row_item.name.full() if defined("row_item.name.first") else ""
edit:
  - name.first
confirm: True

---
continue button field: defendants.revisit
question: |
  Edit defendants
subquestion: |
  ${ defendants.table }

  ${ defendants.add_action() }
---
table: defendants.table
rows: defendants
columns:
  - name: |
      row_item.name.full() if defined("row_item.name.first") else ""
edit:
  - name.first
confirm: True

---
continue button field: users.revisit
question: |
  Edit users
subquestion: |
  ${ users.table }

  ${ users.add_action() }
---
table: users.table
rows: users
columns:
  - Name: |
      row_item.name.full() if defined("row_item.name.first") else ""
  - Year of birth: |
      row_item.birth_year if defined("row_item.birth_year") else ""
  - Address: |
      row_item.address.block() if defined("row_item.address.address") else ""
  - Signature: |
      row_item.signature if defined("row_item.signature") else ""
  - Email: |
      row_item.email if defined("row_item.email") else ""
edit:
  - name.first
  - birth_year
  - address.address
  - signature
  - email
confirm: True

---
continue button field: signer.revisit
question: |
  Edit signer
subquestion: |
  ${ signer.table }

  ${ signer.add_action() }
---
table: signer.table
rows: signer
columns:
  - address: |
      row_item.address.block() if defined("row_item.address.address") else ""
  - phone_number: |
      row_item.phone_number if defined("row_item.phone_number") else ""
edit:
  - address.address
  - phone_number
confirm: True
---
id: docket number
question: |
  What is your case number?
fields:
  - I don't know the case number: dont_know_docket_number
    datatype: yesno    
  - no label: docket_number
    hide if: dont_know_docket_number
validation code: |
  # This should be safe to 
  if dont_know_docket_number:
    docket_number = ''      
---
id: download IL_fee_waiver
event: IL_fee_waiver_download
question: |
  Your form is ready to download.
subquestion: |
  Thank you ${users}. Your form is ready to download and deliver.
  
  View, download and send your form below. Click the "Make changes" button to fix any mistakes.

  ${ action_button_html(url_action('review_IL_fee_waiver'), label='Make changes', color='info') }
  
  
  ${ al_user_bundle.download_list_html() }
  

  ${ al_user_bundle.send_button_html(show_editable_checkbox=False) }

progress: 100
css: ${ docs_list_css() }
---
objects:
  - Post_interview_instructions: ALDocument.using(title="Instructions", filename="IL_fee_waiver_next_steps.docx", enabled=True, has_addendum=False)
  - IL_fee_waiver_attachment: ALDocument.using(title="Fee Waiver Application", filename="FeeWaiver_Civil_Application.pdf", enabled=True, has_addendum=False)
  - IL_fee_waiver_order: ALDocument.using(title="Fee Waiver Order", filename="FeeWaiver_Civil_Order.pdf", enabled=True, has_addendum=False)
---
objects:
  - al_user_bundle: ALDocumentBundle.using(elements=[Post_interview_instructions,IL_fee_waiver_attachment, IL_fee_waiver_order], filename="IL_fee_waiver_package.pdf", title="All forms to download for your records")
  - al_court_bundle: ALDocumentBundle.using(elements=[IL_fee_waiver_attachment, IL_fee_waiver_order], filename="IL_fee_waiver_package.pdf", title="All forms to download for your records")
---
attachments:
  - name: Post interview instructions
    filename: Post-interview-instructions     
    variable name: Post_interview_instructions[i]        
    docx template file: IL_fee_waiver_next_steps.docx
  - name: IL fee waiver order   
    filename: IL_fee_waiver_order
    variable name: IL_fee_waiver_order[i]
    skip undefined: True
    pdf template file: FW-CIV-Order.pdf
    fields:
      - "trial_court_county": ${ trial_court.address.county }
      - "plaintiff": ${ plaintiffs[0] }
      - "defendant": ${ defendants[0] }
      - "docket_number": ${ docket_number }
      - "docket_number__1": ${ docket_number }
      - "user_name_full": ${ users[0] }
      
  - name: IL fee waiver petition
    filename: IL_fee_waiver     
    variable name: IL_fee_waiver_attachment[i]        
    skip undefined: True
    pdf template file: FeeWaiver_Civil_Application.pdf
    fields:
      - "trial_court_county": ${ trial_court.address.county }
      - "plaintiff": ${ plaintiffs[0] }
      - "defendant": ${ defendants[0] }
      - "docket_number": ${ docket_number }
      - "docket_number__1": ${ docket_number }
      - "docket_number__2": ${ docket_number }
      - "user_name_full": ${ users[0] }
      - "user_name_full__1": ${ users[0] }
      - "user_birthdate": ${ users[0].birth_year }
      - "user_address_line_one": ${ users[0].address.line_one() }
      - "user_address_city_state_zip": ${ users[0].address.line_two() }
      - "user_signature": ${ users[0].signature_if_final(i) }
      - "user_email": ${ users[0].email }
      - "signer_address_city_state_zip": |
          ${ signer[0].address.line_two() }
      - "signer_phone_number": |
          ${ signer[0].phone_number }
      - "signer_address_line_one": |
          ${ signer[0].address.line_one() }
      - "user_dependents_adults": |
          % if user_has_dependents:
          ${ user_dependents_adults }
          % endif
      - "user_dependents_children": |
          % if user_has_dependents:
          ${ user_dependents_children }
          % endif
      - "user_receives_benefits_yes": ${ user_receives_benefits }
      - "user_receives_benefits_no": ${ not user_receives_benefits }
      #- "user_pending_benefits_yes": ${ user_pending_benefits }
      #- "user_pending_benefits_no": ${ not user_pending_benefits }
      - "user_income_ss": |
          % if not user_income_none:
          ${ user_income_ss }
          % endif
      - "user_income_employment":  |
          % if not user_income_none:
          ${ user_income_employment }
          % endif
      - "user_income_employment_amount":  |
          % if not user_income_none:
          ${ currency(user_income_employment_amount) }
          % endif
      - "user_income_ss_amount":  |
          % if not user_income_none:
          ${ user_income_ss_amount }
          % endif
      - "user_income_child_support":  |
          % if not user_income_none:
          ${ user_income_child_support }
          % endif
      - "user_income_unemployment":  |
          % if not user_income_none:
          ${ user_income_unemployment }
          % endif
      - "user_income_child_support_amount":  |
          % if not user_income_none:
          ${ currency(user_income_child_support_amount) }
          % endif
      - "user_income_unemployment_amount":  |
          % if not user_income_none:
          ${ currency(user_income_unemployment_amount) }
          % endif
      - "user_income_pension":  |
          % if not user_income_none:
          ${ user_income_pension }
          % endif
      - "user_income_pension_amount":  |
          % if not user_income_none:
          ${ currency(user_income_pension_amount) }
          % endif
      - "user_income_household":  |
          % if not user_income_none:
          ${ user_income_household }
          % endif
      - "user_income_household_amount":  |
          % if not user_income_none:
          ${ currency(user_income_household_amount) }
          % endif
      - "user_income_other":  |
          % if not user_income_none:
          ${ user_income_other }
          % endif
      - "user_income_amount":  |
          % if not user_income_none:
          ${ currency(user_income_amount) }
          % endif
      - "user_income_other_kind":  |
          % if not user_income_none:
          ${ user_income_other_kind }
          % endif
      - "user_income_none": ${ user_income_none }
      - "user_income_total":  |
          % if not user_income_none:
          ${ currency(user_income_total) }
          % endif
      - "user_annual_ss_amount": |
          % if not user_annual_none:
          ${ currency(user_annual_ss_amount) }
          % endif
      - "user_annual_employment": |           
          % if not user_annual_none:
          ${ user_annual_employment }
          % endif
      - "user_annual_employment_amount": |
          % if not user_annual_none:
          ${ currency(user_annual_employment_amount) }
          % endif 
      - "user_annual_ss": |
          % if not user_annual_none:
          ${ user_annual_ss }
          % endif
      - "user_annual_unemployment": |
          % if not user_annual_none:
          ${ user_annual_unemployment }
          % endif
      - "user_annual_child_support": |
          % if not user_annual_none:
          ${ user_annual_child_support }
          % endif
      - "user_annual_child_support_amount": |
          % if not user_annual_none:
          ${ currency(user_annual_child_support_amount) }
          % endif
      - "user_annual_unemployment_amount": |
          % if not user_annual_none:
          ${ currency(user_annual_unemployment_amount) }
          % endif
      - "user_annual_pension": |
          % if not user_annual_none:
          ${ user_annual_pension }
          % endif
      - "user_annual_pension_amount": |
          % if not user_annual_none:
          ${ currency(user_annual_pension_amount) }
          % endif
      - "user_annual_household": |
          % if not user_annual_none:
          ${ user_annual_household }
          % endif
      - "user_annual_household_amount": |
          % if not user_annual_none:
          ${ currency(user_annual_household_amount) }
          % endif
      - "user_annual_other": |
          % if not user_annual_none:
          ${ user_annual_other }
          % endif
      - "user_annual_other_amount": |
          % if not user_annual_none:
          ${ currency(user_annual_other_amount) }
          % endif
      - "user_annual_other_kind": |
          % if not user_annual_none:
          ${ user_annual_other_kind }
          % endif
      - "user_annual_none": ${ user_annual_none }
      - "user_annual_total": |
          % if not user_annual_none:
          ${ currency(user_annual_total) }
          % endif
      - "user_expense_rent": ${ user_expense_rent }
      - "user_expense_rent_amount": ${ currency(user_expense_rent_amount) }
      - "user_expense_mortgage": ${ user_expense_mortgage }
      - "user_expense_mortgage_amount": ${ currency(user_expense_mortgage_amount) }
      - "user_expense_mortgage_other": ${ user_expense_mortgage_other }
      - "user_expense_mortgage_other_amount": ${ currency(user_expense_mortgage_other_amount) }
      - "user_expense_utilities": ${ user_expense_utilities }
      - "user_expense_utilities_amount": ${ currency(user_expense_utilities_amount) }
      - "user_expense_food": ${ user_expense_food }
      - "user_expense_food_amount": ${ currency(user_expense_food_amount) }
      - "user_expense_medical": ${ user_expense_medical }
      - "user_expense_medical_amount": ${ currency(user_expense_medical_amount) }
      - "user_expense_car": ${ user_expense_car }
      - "user_expense_car_amount": ${ currency(user_expense_car_amount) }
      - "user_expense_childcare": ${ user_expense_childcare }
      - "user_expense_childcare_amount": ${ currency(user_expense_childcare_amount) }
      - "user_expense_child_support": ${ user_expense_child_support }
      - "user_expense_child_support_amount": ${ currency(user_expense_child_support_amount) }
      - "user_expense_other": ${ user_expense_other }
      - "user_expense_other_line1": ${ user_expense_other_line1 }
      - "user_expense_other_amount": ${ currency(user_expense_other_amount) }
      - "user_expense_other_line2": ${ user_expense_other_line2 }
      - "user_expense_debt_other": ${ user_expense_debt_other }
      - "user_expense_debt_other_line1": ${ user_expense_debt_other_line1 }
      - "user_expense_debt_other_line2": ${ user_expense_debt_other_line2 }
      - "user_expense_debt_other_amount": ${ currency(user_expense_debt_other_amount) }
      - "user_expense_none": ${ user_expense_none }
      - "user_expense_total": ${ currency(user_expense_total) }
      - "user_asset_bank_account": ${ user_asset_bank_account }
      - "user_asset_bank_account_amount": ${ currency(user_asset_bank_account_amount) }
      - "user_asset_home": ${ user_asset_home }
      - "user_asset_home_amount": ${ currency(user_asset_home_amount) }
      - "user_asset_home_amount_owed": ${ currency(user_asset_home_amount_owed) }
      - "user_asset_other_real_estate": ${ user_asset_other_real_estate }
      - "user_asset_other_real_estate_amount": ${ currency(user_asset_other_real_estate_amount) }
      - "user_asset_other_real_estate_amount_owed": ${ currency(user_asset_other_real_estate_amount_owed) }
      - "user_asset_vehicle1": ${ user_asset_vehicle1 }
      - "user_asset_vehicle1_paid_yes": ${ user_asset_vehicle1_paid }
      - "user_asset_vehicle1_paid_no": ${ not user_asset_vehicle1_paid }
      - "user_asset_vehicle1_amount": ${ currency(user_asset_vehicle1_amount) }
      - "user_asset_vehicle2_paid_yes": ${ user_asset_vehicle2_paid }
      - "user_asset_vehicle2_paid_no": ${ not user_asset_vehicle2_paid }
      - "user_asset_vehicle2": ${ user_asset_vehicle2 }
      - "user_asset_vehicle2_amount": ${ currency(user_asset_vehicle2_amount) }
      - "user_asset_other_amount": ${ currency(user_asset_other_amount) }
      - "user_asset_other": ${ user_asset_other }
      - "user_asset_other_kind": ${ user_asset_other_kind }
      - "user_asset_none": ${ user_asset_none }
      - "relationship_to_minor": |
          % if filing_basis == "on_behalf_of":
          ${ relationship_to_minor  }
          % endif
      - "user_consents_email_notice": ${ user_consents_email_notice }
      - "substantial_hardship_explanation": ${ substantial_hardship_explanation }
